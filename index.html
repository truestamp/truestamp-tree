<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@truestamp/tree - v0.1.1</title><meta name="description" content="Documentation for @truestamp/tree - v0.1.1"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="https://github.com/truestamp/truestamp-tree" class="title">github.com/truestamp/truestamp-tree</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1>@truestamp/tree - v0.1.1 </h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#truestamptree" id="truestamptree" style="color: inherit; text-decoration: none;">
  <h1>@truestamp/tree</h1>
</a>
<p>This library provides a TypeScript/JavaScript API for creating Merkle trees, and validating Merkle inclusion proofs.</p>
<p>Data provided to create the tree is required to already be in binary form (<code>Uint8Array</code>) and all
internal operations are performed on binary data.</p>
<p>The library provides several encodings for Merkle inclusion proofs, any one of which is acceptable for validation.</p>
<p>This library doesn&#39;t hash original data, you have to provide hashed (or arbitrary binary data of fixed size). All SHA2 and SHA3 common hash functions, implemented in pure TypeScript, are exported for your convenience and are the same hash functions used internally.</p>
<p>The library performs extensive compile time (TypeScript), and run time, validation of the incoming and outgoing data to ensure correctness and safety at the possible expense of raw performance. That being said, it is still extremely fast, able to round-trip process a 1,000 item tree in about 20 milliseconds.</p>

<a href="#security-notes" id="security-notes" style="color: inherit; text-decoration: none;">
  <h2>Security Notes</h2>
</a>
<p>In order to help prevent the possibility of a second pre-image attack (see [^1] [^2] [^3]) the data leaf nodes provided to construct the tree are prefixed with a <code>0x00</code> byte. All inner nodes of the tree are prefixed with a <code>0x01</code> byte. These prefixes are also applied during the validation step.</p>
<p>An additional step that can be taken to avoid second pre-image attack vulnerability is to pre-hash your leaves <em>using a different hash function</em> (see [^3]) than the function provided to construct the tree so that <code>H(x) != H&#39;(x)</code>. For example, use <code>sha3-256</code> to pre-hash the leaves, and use <code>sha2-256</code> to construct the tree.</p>
<p>This implementation is potentially vulnerable to a forgery attack for an unbalanced Merkle Tree (see [^5]), wherein, in an unbalanced Merkle Tree, the last leaf node can be duplicated to create an artificially balanced tree. This can result in the same root hash. To avoid this vulnerability, do not construct an unbalanced Merkle Trees (where the length of the <code>data</code> array provided is not a power of 2). This library provides an optional <code>requireBalanced</code> configuration flag that will throw an <code>Error</code> if the <code>data.length</code> is not a power of 2.</p>
<p>[^1]: <a href="https://flawed.net.nz/2018/02/21/attacking-merkle-trees-with-a-second-preimage-attack/">Attacking Merkle Trees With a Second Pre-image Attack</a>
[^2]: <a href="https://en.wikipedia.org/wiki/Merkle_tree#Second_preimage_attack">Merkle tree second pre-image attack</a>
[^3]: <a href="https://crypto.stackexchange.com/questions/2106/what-is-the-purpose-of-using-different-hash-functions-for-the-leaves-and-interna">What is the purpose of using different hash functions for the leaves and internals of a hash tree?</a>
[^4]: <a href="https://github.com/tendermint/tendermint/blob/e0f8936455029a40287a69d5b0e7baa4d5864da1/crypto/merkle/hash.go#L20">Tendermint <code>0x00</code> and <code>0x01</code> prefix implementation</a>
[^5]: <a href="https://bitcointalk.org/?topic=102395">Bitcoin Forum &gt; Bitcoin &gt; Bitcoin Discussion &gt; [Full Disclosure] CVE-2012-2459 (block merkle calculation exploit)</a>
[^6]: <a href="https://news.ycombinator.com/item?id=16572793">Attacking Merkle Trees With a Second Pre-image Attack (Hacker News)</a></p>

<a href="#install" id="install" style="color: inherit; text-decoration: none;">
  <h2>Install</h2>
</a>
<pre><code class="language-sh"><span class="hl-0">npm install @truestamp/tree</span>
</code></pre>

<a href="#sample-usage" id="sample-usage" style="color: inherit; text-decoration: none;">
  <h2>Sample Usage</h2>
</a>
<p>Node.js:</p>
<pre><code class="language-javascript"><span class="hl-1">const</span><span class="hl-0"> { </span><span class="hl-2">Tree</span><span class="hl-0"> } = </span><span class="hl-3">require</span><span class="hl-0">(</span><span class="hl-4">&#39;@truestamp/tree&#39;</span><span class="hl-0">)</span><br/><span class="hl-5">// import { Tree } from &#39;@truestamp/tree&#39;;</span><br/><br/><span class="hl-5">// A sample data array with 8 elements of 32 bytes each.</span><br/><span class="hl-5">// The data elements should be the same length as the output of the hash.</span><br/><span class="hl-1">const</span><span class="hl-0"> </span><span class="hl-2">data</span><span class="hl-0"> = [</span><br/><span class="hl-0">  </span><span class="hl-1">new</span><span class="hl-0"> </span><span class="hl-6">Uint8Array</span><span class="hl-0">([</span><span class="hl-7">0</span><span class="hl-0">, </span><span class="hl-7">1</span><span class="hl-0">, </span><span class="hl-7">2</span><span class="hl-0">, </span><span class="hl-7">3</span><span class="hl-0">, </span><span class="hl-7">4</span><span class="hl-0">, </span><span class="hl-7">5</span><span class="hl-0">, </span><span class="hl-7">6</span><span class="hl-0">, </span><span class="hl-7">7</span><span class="hl-0">, </span><span class="hl-7">8</span><span class="hl-0">, </span><span class="hl-7">9</span><span class="hl-0">, </span><span class="hl-7">10</span><span class="hl-0">, </span><span class="hl-7">11</span><span class="hl-0">, </span><span class="hl-7">12</span><span class="hl-0">, </span><span class="hl-7">13</span><span class="hl-0">, </span><span class="hl-7">14</span><span class="hl-0">, </span><span class="hl-7">15</span><span class="hl-0">, </span><span class="hl-7">16</span><span class="hl-0">, </span><span class="hl-7">17</span><span class="hl-0">, </span><span class="hl-7">18</span><span class="hl-0">, </span><span class="hl-7">19</span><span class="hl-0">, </span><span class="hl-7">20</span><span class="hl-0">, </span><span class="hl-7">21</span><span class="hl-0">, </span><span class="hl-7">22</span><span class="hl-0">, </span><span class="hl-7">23</span><span class="hl-0">, </span><span class="hl-7">24</span><span class="hl-0">, </span><span class="hl-7">25</span><span class="hl-0">, </span><span class="hl-7">26</span><span class="hl-0">, </span><span class="hl-7">27</span><span class="hl-0">, </span><span class="hl-7">28</span><span class="hl-0">, </span><span class="hl-7">29</span><span class="hl-0">, </span><span class="hl-7">30</span><span class="hl-0">, </span><span class="hl-7">31</span><span class="hl-0">]),</span><br/><span class="hl-0">  </span><span class="hl-1">new</span><span class="hl-0"> </span><span class="hl-6">Uint8Array</span><span class="hl-0">([</span><span class="hl-7">0</span><span class="hl-0">, </span><span class="hl-7">1</span><span class="hl-0">, </span><span class="hl-7">2</span><span class="hl-0">, </span><span class="hl-7">3</span><span class="hl-0">, </span><span class="hl-7">4</span><span class="hl-0">, </span><span class="hl-7">5</span><span class="hl-0">, </span><span class="hl-7">6</span><span class="hl-0">, </span><span class="hl-7">7</span><span class="hl-0">, </span><span class="hl-7">8</span><span class="hl-0">, </span><span class="hl-7">9</span><span class="hl-0">, </span><span class="hl-7">10</span><span class="hl-0">, </span><span class="hl-7">11</span><span class="hl-0">, </span><span class="hl-7">12</span><span class="hl-0">, </span><span class="hl-7">13</span><span class="hl-0">, </span><span class="hl-7">14</span><span class="hl-0">, </span><span class="hl-7">15</span><span class="hl-0">, </span><span class="hl-7">16</span><span class="hl-0">, </span><span class="hl-7">17</span><span class="hl-0">, </span><span class="hl-7">18</span><span class="hl-0">, </span><span class="hl-7">19</span><span class="hl-0">, </span><span class="hl-7">20</span><span class="hl-0">, </span><span class="hl-7">21</span><span class="hl-0">, </span><span class="hl-7">22</span><span class="hl-0">, </span><span class="hl-7">23</span><span class="hl-0">, </span><span class="hl-7">24</span><span class="hl-0">, </span><span class="hl-7">25</span><span class="hl-0">, </span><span class="hl-7">26</span><span class="hl-0">, </span><span class="hl-7">27</span><span class="hl-0">, </span><span class="hl-7">28</span><span class="hl-0">, </span><span class="hl-7">29</span><span class="hl-0">, </span><span class="hl-7">30</span><span class="hl-0">, </span><span class="hl-7">31</span><span class="hl-0">]),</span><br/><span class="hl-0">  </span><span class="hl-1">new</span><span class="hl-0"> </span><span class="hl-6">Uint8Array</span><span class="hl-0">([</span><span class="hl-7">0</span><span class="hl-0">, </span><span class="hl-7">1</span><span class="hl-0">, </span><span class="hl-7">2</span><span class="hl-0">, </span><span class="hl-7">3</span><span class="hl-0">, </span><span class="hl-7">4</span><span class="hl-0">, </span><span class="hl-7">5</span><span class="hl-0">, </span><span class="hl-7">6</span><span class="hl-0">, </span><span class="hl-7">7</span><span class="hl-0">, </span><span class="hl-7">8</span><span class="hl-0">, </span><span class="hl-7">9</span><span class="hl-0">, </span><span class="hl-7">10</span><span class="hl-0">, </span><span class="hl-7">11</span><span class="hl-0">, </span><span class="hl-7">12</span><span class="hl-0">, </span><span class="hl-7">13</span><span class="hl-0">, </span><span class="hl-7">14</span><span class="hl-0">, </span><span class="hl-7">15</span><span class="hl-0">, </span><span class="hl-7">16</span><span class="hl-0">, </span><span class="hl-7">17</span><span class="hl-0">, </span><span class="hl-7">18</span><span class="hl-0">, </span><span class="hl-7">19</span><span class="hl-0">, </span><span class="hl-7">20</span><span class="hl-0">, </span><span class="hl-7">21</span><span class="hl-0">, </span><span class="hl-7">22</span><span class="hl-0">, </span><span class="hl-7">23</span><span class="hl-0">, </span><span class="hl-7">24</span><span class="hl-0">, </span><span class="hl-7">25</span><span class="hl-0">, </span><span class="hl-7">26</span><span class="hl-0">, </span><span class="hl-7">27</span><span class="hl-0">, </span><span class="hl-7">28</span><span class="hl-0">, </span><span class="hl-7">29</span><span class="hl-0">, </span><span class="hl-7">30</span><span class="hl-0">, </span><span class="hl-7">31</span><span class="hl-0">]),</span><br/><span class="hl-0">  </span><span class="hl-1">new</span><span class="hl-0"> </span><span class="hl-6">Uint8Array</span><span class="hl-0">([</span><span class="hl-7">0</span><span class="hl-0">, </span><span class="hl-7">1</span><span class="hl-0">, </span><span class="hl-7">2</span><span class="hl-0">, </span><span class="hl-7">3</span><span class="hl-0">, </span><span class="hl-7">4</span><span class="hl-0">, </span><span class="hl-7">5</span><span class="hl-0">, </span><span class="hl-7">6</span><span class="hl-0">, </span><span class="hl-7">7</span><span class="hl-0">, </span><span class="hl-7">8</span><span class="hl-0">, </span><span class="hl-7">9</span><span class="hl-0">, </span><span class="hl-7">10</span><span class="hl-0">, </span><span class="hl-7">11</span><span class="hl-0">, </span><span class="hl-7">12</span><span class="hl-0">, </span><span class="hl-7">13</span><span class="hl-0">, </span><span class="hl-7">14</span><span class="hl-0">, </span><span class="hl-7">15</span><span class="hl-0">, </span><span class="hl-7">16</span><span class="hl-0">, </span><span class="hl-7">17</span><span class="hl-0">, </span><span class="hl-7">18</span><span class="hl-0">, </span><span class="hl-7">19</span><span class="hl-0">, </span><span class="hl-7">20</span><span class="hl-0">, </span><span class="hl-7">21</span><span class="hl-0">, </span><span class="hl-7">22</span><span class="hl-0">, </span><span class="hl-7">23</span><span class="hl-0">, </span><span class="hl-7">24</span><span class="hl-0">, </span><span class="hl-7">25</span><span class="hl-0">, </span><span class="hl-7">26</span><span class="hl-0">, </span><span class="hl-7">27</span><span class="hl-0">, </span><span class="hl-7">28</span><span class="hl-0">, </span><span class="hl-7">29</span><span class="hl-0">, </span><span class="hl-7">30</span><span class="hl-0">, </span><span class="hl-7">31</span><span class="hl-0">]),</span><br/><span class="hl-0">  </span><span class="hl-1">new</span><span class="hl-0"> </span><span class="hl-6">Uint8Array</span><span class="hl-0">([</span><span class="hl-7">0</span><span class="hl-0">, </span><span class="hl-7">1</span><span class="hl-0">, </span><span class="hl-7">2</span><span class="hl-0">, </span><span class="hl-7">3</span><span class="hl-0">, </span><span class="hl-7">4</span><span class="hl-0">, </span><span class="hl-7">5</span><span class="hl-0">, </span><span class="hl-7">6</span><span class="hl-0">, </span><span class="hl-7">7</span><span class="hl-0">, </span><span class="hl-7">8</span><span class="hl-0">, </span><span class="hl-7">9</span><span class="hl-0">, </span><span class="hl-7">10</span><span class="hl-0">, </span><span class="hl-7">11</span><span class="hl-0">, </span><span class="hl-7">12</span><span class="hl-0">, </span><span class="hl-7">13</span><span class="hl-0">, </span><span class="hl-7">14</span><span class="hl-0">, </span><span class="hl-7">15</span><span class="hl-0">, </span><span class="hl-7">16</span><span class="hl-0">, </span><span class="hl-7">17</span><span class="hl-0">, </span><span class="hl-7">18</span><span class="hl-0">, </span><span class="hl-7">19</span><span class="hl-0">, </span><span class="hl-7">20</span><span class="hl-0">, </span><span class="hl-7">21</span><span class="hl-0">, </span><span class="hl-7">22</span><span class="hl-0">, </span><span class="hl-7">23</span><span class="hl-0">, </span><span class="hl-7">24</span><span class="hl-0">, </span><span class="hl-7">25</span><span class="hl-0">, </span><span class="hl-7">26</span><span class="hl-0">, </span><span class="hl-7">27</span><span class="hl-0">, </span><span class="hl-7">28</span><span class="hl-0">, </span><span class="hl-7">29</span><span class="hl-0">, </span><span class="hl-7">30</span><span class="hl-0">, </span><span class="hl-7">31</span><span class="hl-0">]),</span><br/><span class="hl-0">  </span><span class="hl-1">new</span><span class="hl-0"> </span><span class="hl-6">Uint8Array</span><span class="hl-0">([</span><span class="hl-7">0</span><span class="hl-0">, </span><span class="hl-7">1</span><span class="hl-0">, </span><span class="hl-7">2</span><span class="hl-0">, </span><span class="hl-7">3</span><span class="hl-0">, </span><span class="hl-7">4</span><span class="hl-0">, </span><span class="hl-7">5</span><span class="hl-0">, </span><span class="hl-7">6</span><span class="hl-0">, </span><span class="hl-7">7</span><span class="hl-0">, </span><span class="hl-7">8</span><span class="hl-0">, </span><span class="hl-7">9</span><span class="hl-0">, </span><span class="hl-7">10</span><span class="hl-0">, </span><span class="hl-7">11</span><span class="hl-0">, </span><span class="hl-7">12</span><span class="hl-0">, </span><span class="hl-7">13</span><span class="hl-0">, </span><span class="hl-7">14</span><span class="hl-0">, </span><span class="hl-7">15</span><span class="hl-0">, </span><span class="hl-7">16</span><span class="hl-0">, </span><span class="hl-7">17</span><span class="hl-0">, </span><span class="hl-7">18</span><span class="hl-0">, </span><span class="hl-7">19</span><span class="hl-0">, </span><span class="hl-7">20</span><span class="hl-0">, </span><span class="hl-7">21</span><span class="hl-0">, </span><span class="hl-7">22</span><span class="hl-0">, </span><span class="hl-7">23</span><span class="hl-0">, </span><span class="hl-7">24</span><span class="hl-0">, </span><span class="hl-7">25</span><span class="hl-0">, </span><span class="hl-7">26</span><span class="hl-0">, </span><span class="hl-7">27</span><span class="hl-0">, </span><span class="hl-7">28</span><span class="hl-0">, </span><span class="hl-7">29</span><span class="hl-0">, </span><span class="hl-7">30</span><span class="hl-0">, </span><span class="hl-7">31</span><span class="hl-0">]),</span><br/><span class="hl-0">  </span><span class="hl-1">new</span><span class="hl-0"> </span><span class="hl-6">Uint8Array</span><span class="hl-0">([</span><span class="hl-7">0</span><span class="hl-0">, </span><span class="hl-7">1</span><span class="hl-0">, </span><span class="hl-7">2</span><span class="hl-0">, </span><span class="hl-7">3</span><span class="hl-0">, </span><span class="hl-7">4</span><span class="hl-0">, </span><span class="hl-7">5</span><span class="hl-0">, </span><span class="hl-7">6</span><span class="hl-0">, </span><span class="hl-7">7</span><span class="hl-0">, </span><span class="hl-7">8</span><span class="hl-0">, </span><span class="hl-7">9</span><span class="hl-0">, </span><span class="hl-7">10</span><span class="hl-0">, </span><span class="hl-7">11</span><span class="hl-0">, </span><span class="hl-7">12</span><span class="hl-0">, </span><span class="hl-7">13</span><span class="hl-0">, </span><span class="hl-7">14</span><span class="hl-0">, </span><span class="hl-7">15</span><span class="hl-0">, </span><span class="hl-7">16</span><span class="hl-0">, </span><span class="hl-7">17</span><span class="hl-0">, </span><span class="hl-7">18</span><span class="hl-0">, </span><span class="hl-7">19</span><span class="hl-0">, </span><span class="hl-7">20</span><span class="hl-0">, </span><span class="hl-7">21</span><span class="hl-0">, </span><span class="hl-7">22</span><span class="hl-0">, </span><span class="hl-7">23</span><span class="hl-0">, </span><span class="hl-7">24</span><span class="hl-0">, </span><span class="hl-7">25</span><span class="hl-0">, </span><span class="hl-7">26</span><span class="hl-0">, </span><span class="hl-7">27</span><span class="hl-0">, </span><span class="hl-7">28</span><span class="hl-0">, </span><span class="hl-7">29</span><span class="hl-0">, </span><span class="hl-7">30</span><span class="hl-0">, </span><span class="hl-7">31</span><span class="hl-0">]),</span><br/><span class="hl-0">  </span><span class="hl-1">new</span><span class="hl-0"> </span><span class="hl-6">Uint8Array</span><span class="hl-0">([</span><span class="hl-7">0</span><span class="hl-0">, </span><span class="hl-7">1</span><span class="hl-0">, </span><span class="hl-7">2</span><span class="hl-0">, </span><span class="hl-7">3</span><span class="hl-0">, </span><span class="hl-7">4</span><span class="hl-0">, </span><span class="hl-7">5</span><span class="hl-0">, </span><span class="hl-7">6</span><span class="hl-0">, </span><span class="hl-7">7</span><span class="hl-0">, </span><span class="hl-7">8</span><span class="hl-0">, </span><span class="hl-7">9</span><span class="hl-0">, </span><span class="hl-7">10</span><span class="hl-0">, </span><span class="hl-7">11</span><span class="hl-0">, </span><span class="hl-7">12</span><span class="hl-0">, </span><span class="hl-7">13</span><span class="hl-0">, </span><span class="hl-7">14</span><span class="hl-0">, </span><span class="hl-7">15</span><span class="hl-0">, </span><span class="hl-7">16</span><span class="hl-0">, </span><span class="hl-7">17</span><span class="hl-0">, </span><span class="hl-7">18</span><span class="hl-0">, </span><span class="hl-7">19</span><span class="hl-0">, </span><span class="hl-7">20</span><span class="hl-0">, </span><span class="hl-7">21</span><span class="hl-0">, </span><span class="hl-7">22</span><span class="hl-0">, </span><span class="hl-7">23</span><span class="hl-0">, </span><span class="hl-7">24</span><span class="hl-0">, </span><span class="hl-7">25</span><span class="hl-0">, </span><span class="hl-7">26</span><span class="hl-0">, </span><span class="hl-7">27</span><span class="hl-0">, </span><span class="hl-7">28</span><span class="hl-0">, </span><span class="hl-7">29</span><span class="hl-0">, </span><span class="hl-7">30</span><span class="hl-0">, </span><span class="hl-7">31</span><span class="hl-0">]),</span><br/><span class="hl-0">]</span><br/><br/><span class="hl-5">// Construct the Merkle tree, the hash function name and options are optional.</span><br/><span class="hl-1">const</span><span class="hl-0"> </span><span class="hl-2">t</span><span class="hl-0"> = </span><span class="hl-1">new</span><span class="hl-0"> </span><span class="hl-3">Tree</span><span class="hl-0">(</span><span class="hl-8">data</span><span class="hl-0">, </span><span class="hl-4">&#39;sha256&#39;</span><span class="hl-0">, { </span><span class="hl-8">requireBalanced:</span><span class="hl-0"> </span><span class="hl-1">true</span><span class="hl-0">, </span><span class="hl-8">debug:</span><span class="hl-0"> </span><span class="hl-1">false</span><span class="hl-0"> })</span><br/><br/><span class="hl-5">// Get the root of the tree for later use</span><br/><span class="hl-1">const</span><span class="hl-0"> </span><span class="hl-2">r</span><span class="hl-0"> = </span><span class="hl-8">t</span><span class="hl-0">.</span><span class="hl-3">root</span><span class="hl-0">()</span><br/><br/><span class="hl-5">// For example purposes, pick (and store a verifiable copy) of</span><br/><span class="hl-5">// one data element that will be verified.</span><br/><span class="hl-5">// In the real world likely store a pristine copy of the data</span><br/><span class="hl-5">// for later re-hashing and verification.</span><br/><span class="hl-1">const</span><span class="hl-0"> </span><span class="hl-2">d</span><span class="hl-0"> = </span><span class="hl-8">data</span><span class="hl-0">[</span><span class="hl-7">4</span><span class="hl-0">]</span><br/><br/><span class="hl-5">// Extract the Merkle inclusion proof for that data element to store</span><br/><span class="hl-5">// alongside your pristine copy of the data.</span><br/><span class="hl-5">// In the real world you&#39;d likely do the same for every data element</span><br/><span class="hl-5">// to store and later verify).</span><br/><span class="hl-1">const</span><span class="hl-0"> </span><span class="hl-2">p</span><span class="hl-0"> = </span><span class="hl-8">t</span><span class="hl-0">.</span><span class="hl-3">proofObject</span><span class="hl-0">(</span><span class="hl-8">d</span><span class="hl-0">)</span><br/><br/><span class="hl-5">// At any time in the future, verify your proof by providing</span><br/><span class="hl-5">// the stored root, the proof, and the data. The last argument, the hash</span><br/><span class="hl-5">// function name, is optional in this case since we&#39;re using the</span><br/><span class="hl-5">// proof object encoding.</span><br/><span class="hl-8">console</span><span class="hl-0">.</span><span class="hl-3">log</span><span class="hl-0">(</span><span class="hl-4">&#39;verified?&#39;</span><span class="hl-0">, </span><span class="hl-8">Tree</span><span class="hl-0">.</span><span class="hl-3">verify</span><span class="hl-0">(</span><span class="hl-8">r</span><span class="hl-0">, </span><span class="hl-8">p</span><span class="hl-0">, </span><span class="hl-8">d</span><span class="hl-0">)) </span><span class="hl-5">// returns true or false</span>
</code></pre>
<p>A more detailed version of this example can be found in [examples/example.cjs].</p>

<a href="#api-documentation" id="api-documentation" style="color: inherit; text-decoration: none;">
  <h2>API Documentation</h2>
</a>
<p>The <a href="https://truestamp.github.io/truestamp-tree/">TypeScript API documentation</a> for this project is generated and published upon each new release.</p>

<a href="#performance" id="performance" style="color: inherit; text-decoration: none;">
  <h2>Performance</h2>
</a>
<p>Using the example code on a MacBook Pro and the following size sample data sets of random elements and the Node.js <code>crypto</code> SHA-256 function:</p>

<a href="#1000-data-elements" id="1000-data-elements" style="color: inherit; text-decoration: none;">
  <h3><code>1,000</code> data elements</h3>
</a>
<ul>
<li>creates a tree in <code>13.03ms</code></li>
<li>extracts the Merkle root from the tree in <code>0.154ms</code></li>
<li>extracts a single Merkle inclusion proof in <code>3.42ms</code></li>
<li>verifies that proof in <code>1.15ms</code></li>
</ul>

<a href="#1000000-data-elements" id="1000000-data-elements" style="color: inherit; text-decoration: none;">
  <h3><code>1,000,000</code> data elements</h3>
</a>
<ul>
<li>creates a tree in <code>3.490s</code></li>
<li>extracts the Merkle root from the tree in <code>0.204ms</code></li>
<li>extracts a single Merkle inclusion proof in <code>23.139ms</code></li>
<li>verifies that proof in <code>1.533ms</code></li>
</ul>

<a href="#testing" id="testing" style="color: inherit; text-decoration: none;">
  <h2>Testing</h2>
</a>
<p>This library aims to maintain 100% code test coverage.</p>
<pre><code class="language-sh"><span class="hl-0">npm i</span><br/><span class="hl-0">npm </span><span class="hl-3">test</span>
</code></pre>

<a href="#contributing" id="contributing" style="color: inherit; text-decoration: none;">
  <h2>Contributing</h2>
</a>
<p>We&#39;d love you to join our network of contributors. Please read
<a href="CONTRIBUTING.md">CONTRIBUTING.md</a> for help getting started.</p>

<a href="#releasing" id="releasing" style="color: inherit; text-decoration: none;">
  <h3>Releasing</h3>
</a>
<ul>
<li>Commit changes, merge PR&#39;s to <code>main</code> branch</li>
<li>Bump <code>version</code> field in <code>package.json</code></li>
<li>Cut a new <a href="https://github.com/truestamp/truestamp-tree/releases">release</a></li>
<li>New release will trigger workflow to build, test, and publish package to
<a href="https://github.com/truestamp/truestamp-tree/packages">Github Package Registry</a>
and <a href="https://www.npmjs.com/package/@truestamp/tree">NPM.js</a>.</li>
</ul>

<a href="#code-of-conduct" id="code-of-conduct" style="color: inherit; text-decoration: none;">
  <h2>Code of Conduct</h2>
</a>
<p>We expect all members of the community to respect our
<a href="CODE_OF_CONDUCT.md">Code of Conduct</a> at all times.</p>

<a href="#legal" id="legal" style="color: inherit; text-decoration: none;">
  <h2>Legal</h2>
</a>
<p>Copyright © 2022 Truestamp Inc. All Rights Reserved.</p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Exports</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="tsd-kind-class"><a href="classes/Tree.html" class="tsd-kind-icon">Tree</a></li><li class="tsd-kind-type-alias"><a href="modules.html#ProofBinary" class="tsd-kind-icon">Proof<wbr/>Binary</a></li><li class="tsd-kind-type-alias"><a href="modules.html#ProofHex" class="tsd-kind-icon">Proof<wbr/>Hex</a></li><li class="tsd-kind-type-alias"><a href="modules.html#ProofObject" class="tsd-kind-icon">Proof<wbr/>Object</a></li><li class="tsd-kind-type-alias"><a href="modules.html#ProofObjectLayer" class="tsd-kind-icon">Proof<wbr/>Object<wbr/>Layer</a></li><li class="tsd-kind-type-alias"><a href="modules.html#TreeData" class="tsd-kind-icon">Tree<wbr/>Data</a></li><li class="tsd-kind-type-alias"><a href="modules.html#TreeHashFunctionName" class="tsd-kind-icon">Tree<wbr/>Hash<wbr/>Function<wbr/>Name</a></li><li class="tsd-kind-type-alias"><a href="modules.html#TreeOptions" class="tsd-kind-icon">Tree<wbr/>Options</a></li><li class="tsd-kind-variable"><a href="modules.html#ProofBinaryStruct" class="tsd-kind-icon">Proof<wbr/>Binary<wbr/>Struct</a></li><li class="tsd-kind-variable"><a href="modules.html#ProofHexStruct" class="tsd-kind-icon">Proof<wbr/>Hex<wbr/>Struct</a></li><li class="tsd-kind-variable"><a href="modules.html#ProofObjectLayerStruct" class="tsd-kind-icon">Proof<wbr/>Object<wbr/>Layer<wbr/>Struct</a></li><li class="tsd-kind-variable"><a href="modules.html#ProofObjectStruct" class="tsd-kind-icon">Proof<wbr/>Object<wbr/>Struct</a></li><li class="tsd-kind-variable"><a href="modules.html#TreeDataStruct" class="tsd-kind-icon">Tree<wbr/>Data<wbr/>Struct</a></li><li class="tsd-kind-variable"><a href="modules.html#TreeHashFunctionNameStruct" class="tsd-kind-icon">Tree<wbr/>Hash<wbr/>Function<wbr/>Name<wbr/>Struct</a></li><li class="tsd-kind-variable"><a href="modules.html#TreeOptionsStruct" class="tsd-kind-icon">Tree<wbr/>Options<wbr/>Struct</a></li><li class="tsd-kind-function"><a href="modules.html#compare" class="tsd-kind-icon">compare</a></li><li class="tsd-kind-function"><a href="modules.html#concat" class="tsd-kind-icon">concat</a></li><li class="tsd-kind-function"><a href="modules.html#decodeHex" class="tsd-kind-icon">decode<wbr/>Hex</a></li><li class="tsd-kind-function"><a href="modules.html#encodeHex" class="tsd-kind-icon">encode<wbr/>Hex</a></li><li class="tsd-kind-function"><a href="modules.html#powerOfTwo" class="tsd-kind-icon">power<wbr/>Of<wbr/>Two</a></li><li class="tsd-kind-function"><a href="modules.html#sha224" class="tsd-kind-icon">sha224</a></li><li class="tsd-kind-function"><a href="modules.html#sha256" class="tsd-kind-icon">sha256</a></li><li class="tsd-kind-function"><a href="modules.html#sha384" class="tsd-kind-icon">sha384</a></li><li class="tsd-kind-function"><a href="modules.html#sha3_224" class="tsd-kind-icon">sha3_<wbr/>224</a></li><li class="tsd-kind-function"><a href="modules.html#sha3_256" class="tsd-kind-icon">sha3_<wbr/>256</a></li><li class="tsd-kind-function"><a href="modules.html#sha3_384" class="tsd-kind-icon">sha3_<wbr/>384</a></li><li class="tsd-kind-function"><a href="modules.html#sha3_512" class="tsd-kind-icon">sha3_<wbr/>512</a></li><li class="tsd-kind-function"><a href="modules.html#sha512" class="tsd-kind-icon">sha512</a></li><li class="tsd-kind-function"><a href="modules.html#sha512_256" class="tsd-kind-icon">sha512_<wbr/>256</a></li></ul></nav></div></div></div><footer class=""><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li><li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-method tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="overlay"></div><script src="assets/main.js"></script></body></html>